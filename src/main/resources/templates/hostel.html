<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/styles.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,400;0,600;0,800;0,900;1,400;1,500&family=Tajawal:wght@500&display=swap"
          rel="stylesheet">

    <title>User Page</title>
</head>
<body>
<!-----------Start Header Section-------------->
<div th:replace="fragments/header :: header"></div>
<!-----------End Header Section---------------->
<!-----------Start Nav Section-------------->
<div th:replace="fragments/nav :: nav"></div>
<!-----------End Nav Section---------------->
<main>
    <div class="container">
        <!-----------Start Reservation Section-------------->
        <form method="post" action="/reservation">
            <div class="col-12 mt-5">
                <h1 class="mb-4" th:text="${hostel.name}">
                    Nom de l'hôtel
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                         class="bi bi-star-fill text-yellow" viewBox="0 0 16 16">
                        <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                         class="bi bi-star-fill text-yellow" viewBox="0 0 16 16">
                        <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                    </svg>
                    <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor"
                         class="bi bi-star-fill text-yellow" viewBox="0 0 16 16">
                        <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                    </svg>
                </h1>
                <input type="hidden" th:name="selectedHostelName" th:value="${hostel.name}">
                <input type="hidden" th:name="selectedHostelAddress" th:value="${hostel.address}">
                <input type="hidden" th:name="selectedHostelPostalCode" th:value="${hostel.postalCode}">
                <input type="hidden" th:name="selectedHostelCity" th:value="${hostel.city}">
                <div class="card shadow d-flex py-3">
                    <div class="row align-items-center">
                        <div id="carouselExampleFade" class="carousel slide carousel-fade ms-3 col-4">
                            <div class="carousel-inner">
                                <div class="carousel-item active">
                                    <img src="/hotel1.jpg" class="d-block img-hotel w-100" alt="photo de l'hôtel">
                                </div>
                                <div class="carousel-item">
                                    <img src="/hotel2.jpg" class="d-block img-hotel w-100" alt="photo de l'hôtel">
                                </div>
                                <div class="carousel-item">
                                    <img src="/hotel3.jpg" class="d-block img-hotel w-100" alt="photo de l'hôtel">
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade"
                                    data-bs-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade"
                                    data-bs-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                        <div class="col-7 d-flex">
                            <div class="d-flex flex-column">
                                <p th:text="${hostel.description}">Lorem ipsum dolor sit amet, consectetur adipiscing
                                    elit,
                                    sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
                                    veniam.
                                    Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore
                                    eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident.
                                </p>
                                <div class="d-flex flex-wrap my-2">
                                    <div class="me-3">
                                        <i class="bi bi-wifi me-1"></i>
                                        Wi-Fi
                                    </div>
                                    <div class="me-3">
                                        <i class="bi bi-cup-hot-fill me-1"></i>
                                        Petit déjeuner
                                    </div>
                                    <div class="me-3">
                                        <i class="bi bi-p-square-fill me-1"></i>
                                        Parking
                                    </div>
                                    <div class="me-3">
                                        <i class="bi bi-life-preserver me-1"></i>
                                        Piscine
                                    </div>
                                    <div th:if="${reviews.size() > 0}" class="d-flex me-3">
                                        <div class="rating-square me-1" th:text="${averageScore}">
                                            4.7
                                        </div>
                                        Avis clients
                                    </div>
                                    <div th:unless="${reviews.size() > 0}" class="mt-2 text-blue">
                                        Il n'y a pas encore d'avis client pour cet hôtel.
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card border-selectedDate shadow mt-5">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <span>Sélectionner vos dates de séjour :</span>
                    <div class="card-text selected-date d-flex align-items-center">
                        <label for="selectedDateArrived" class="me-2">Date d'arrivée : </label>
                        <input class="input-selectedDate" id="selectedDateArrived" th:value="selectedDateArrived"
                               th:name="selectedDateArrived" type="datetime-local"/>
                    </div>
                    <div class="card-text selected-date d-flex align-items-center">
                        <label for="selectedDepartureDate" class="me-2">Date de départ : </label>
                        <input class="input-selectedDate" id="selectedDepartureDate" th:value="selectedDepartureDate"
                               th:name="selectedDepartureDate" type="datetime-local"/>
                    </div>
                </div>
            </div>
            <div class="mt-5 d-flex">
                <div class="card shadow d-flex w-50 me-2">
                    <h3 class="text-center mt-2">Services Supplémentaires</h3>
                    <hr class="customHr mt-0">
                    <div class="d-flex mt-2 mx-3 flex-wrap">
                        <div class="form-check col-3 mb-3" th:each="benefitHostel : ${hostel.benefitHostels}">
                            <input class="form-check-input" type="checkbox">
                            <label class="form-check-label d-flex flex-column">
                                <span th:text="${benefitHostel.benefit.typeS}">Wifi</span>
                                <span th:text="${benefitHostel.price}+ ' €'">2€</span>
                                <input type="hidden" th:name="${benefitHostel.benefit.typeS}"
                                       th:value="${benefitHostel.benefit.typeS}">
                                <input type="hidden" th:name="${benefitHostel.price}" th:value="${benefitHostel.price}">
                            </label>
                        </div>
                    </div>
                </div>

                <div class="card shadow d-flex w-50 ms-2">
                    <h3 class="text-center mt-2">Types de chambre</h3>
                    <hr class="customHr mt-0">
                    <div class="d-flex mt-2 mx-3 flex-wrap">
                        <div class="form-check col-3 mb-3" th:each="room, roomIndex : ${rooms}">
                            <input class="form-check-input" type="radio" id="roomRadio-[[${roomIndex.index}]]"
                                   th:value="${room.type.typeRoom}">
                            <label class="form-check-label d-flex flex-column" for="roomRadio-[[${roomIndex.index}]]">
                                <span th:text="${room.type.typeRoom}">Simple</span>
                                <span th:text="${room.price}+ ' €'" th:name="selectedRoomPrice"
                                      data-price="${room.price}"
                                      th:value="${room.price}">89€</span>
                                <input type="hidden" id="selectedRoom" name="selectedRoom" value="">
                                <input type="hidden" id="selectedRoomPrice" name="selectedRoomPrice"
                                       data-price="${room.price}" th:value="${room.price}">
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card shadow d-flex justify-content-center my-5">
                <div class="card-body">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" th:name="taxi" th:value="oui"
                               id="flexCheckDefault">
                        <label class="form-check-label" for="flexCheckDefault">
                            Réserver un taxi avec Kidcab*
                        </label>
                    </div>
                    <p class="card-text text-end">
                        Total : <i class="bi bi-currency-euro"></i>
                    </p>
                    <div class="d-grid gap-2 col-6 mx-auto mt-2 mb-4">
                        <button class="btn shadow btnF btn-white" type="submit"><i
                                class="bi bi-calendar-check me-2"></i>Réserver
                        </button>
                    </div>
                    <span>*Service de taxi spécialisé dans le transport des mineurs, plus d'infos dans notre FAQ</span>
                </div>
            </div>
        </form>
        <!-----------End Reservation Section-------------->
        <hr class="customHr">
        <div class="col-12">
            <h2 class="my-4">Avis clients</h2>
            <div class="d-flex justify-content-between">
                <div class="card shadow px-3 pt-3 col-3" th:each="reviews : ${reviews}">
                    <div class="d-flex justify-content-between">
                        <h5 class="card-title mb-3"
                            th:text="${reviews.booking.userProfile.lastNameU + ' ' + reviews.booking.userProfile.firstNameU}">
                            Jean-Pierre Dujardin</h5>
                        <div class="rating-square" th:text="${reviews.scores}">
                            4
                        </div>
                    </div>
                    <h6 class="card-subtitle mb-2 text-body-secondary" th:text="${reviews.booking.room.type.typeRoom}">
                        Chambre simple</h6>
                    <p class="card-text" th:text="${reviews.commentary}">Some quick example text to build on the card
                        title and make up the bulk of the
                        card's content.</p>
                    <p class="text-end" th:text="${reviews.createdAt}">Séjour en 2023</p>
                </div>
            </div>
            <div class="d-grid gap-2 col-6 mx-auto mt-5 mb-5">
                <a href="#" class="btn shadow btnF btn-white" type="button"><i class="bi bi-plus-circle me-2"></i>Voir
                    plus d'avis</a>
            </div>
        </div>
    </div>
</main>
<!-------------Start Footer Section---------->
<div th:replace="fragments/footer :: footer"></div>
<!-------------End Footer Section------------>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"
        integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
        crossorigin="anonymous"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Sélectionnez tous les boutons radio
        const radioButtons = document.querySelectorAll('.form-check-input[type="radio"]');

        // Parcourez les boutons radio et ajoutez un écouteur d'événement de clic
        radioButtons.forEach(function (button) {
            button.addEventListener('click', function () {
                // Récupérez la valeur sélectionnée
                const selectedRoom = this.value;
                const selectedRoomPrice = this.getAttribute('data-price');

                // Mettez à jour les champs cachés correspondants avec la valeur sélectionnée
                const roomHiddenInput = document.getElementById('selectedRoom');
                roomHiddenInput.value = selectedRoom;

                const priceHiddenInput = document.getElementById('selectedRoomPrice');
                priceHiddenInput.value = selectedRoomPrice

            });
        });
    });
</script>
</body>
</html>